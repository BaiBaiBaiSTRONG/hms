<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
		<title>工作台</title>
		<script src="http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
		<link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet"
			href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i">
		<link rel="stylesheet" href="assets/fonts/fontawesome-all.min.css">
	</head>

	<body id="page-top">
		<div id="wrapper">
			<nav class="navbar navbar-dark align-items-start sidebar sidebar-dark accordion bg-gradient-primary p-0">
				<div class="container-fluid d-flex flex-column p-0">
					<a class="navbar-brand d-flex justify-content-center align-items-center sidebar-brand m-0" href="#">
						<div class="sidebar-brand-icon rotate-n-15"><i class="fas fa-coins"></i></div>
						<div class="sidebar-brand-text mx-3"><span>Baix3XiaoRuo</span></div>
					</a>
					<hr class="sidebar-divider my-0">
					<ul class="nav navbar-nav text-light" id="accordionSidebar">
						<li class="nav-item" role="presentation"><a class="nav-link active" href="1-1.html"><i
									class="fas fa-table"></i><span>房产信息管理</span></a></li>
						<li class="nav-item" role="presentation"><a class="nav-link active" href="2-1.html"><i
									class="fas fa-table"></i><span>收费管理</span></a></li>
						<li class="nav-item" role="presentation"><a class="nav-link active" href="3-1.html"><i
									class="fas fa-table"></i><span>办公管理</span></a></li>
						<li class="nav-item" role="presentation"><a class="nav-link active" href="4-1.html"><i
									class="fas fa-table"></i><span>文档管理</span></a></li>
						<li class="nav-item" role="presentation"><a class="nav-link active" href="5-1.html"><i
									class="fas fa-table"></i><span>停车管理</span></a></li>
						<li class="nav-item" role="presentation"><a class="nav-link active" href="6-1.html"><i
									class="fas fa-table"></i><span>产权人管理</span></a></li>
						<li class="nav-item" role="presentation"><a class="nav-link active" href="7-1.html"><i
									class="fas fa-table"></i><span>产权人服务</span></a></li>
						<li class="nav-item" role="presentation"><a class="nav-link active" href="8-1.html"><i
									class="fas fa-table"></i><span>保洁管理</span></a></li>
						<li class="nav-item" role="presentation"><a class="nav-link active" href="9-1.html"><i
									class="fas fa-table"></i><span>保安管理</span></a></li>
					</ul>
					<div class="text-center d-none d-md-inline"><button class="btn rounded-circle border-0"
							id="sidebarToggle" type="button"></button></div>
				</div>
			</nav>
			<div class="d-flex flex-column" id="content-wrapper">
				<div id="content">
					<nav class="navbar navbar-light navbar-expand bg-white shadow mb-5 topbar static-top">

						<div class="container-fluid"><button class="btn btn-link d-md-none rounded-circle mr-3"
								id="sidebarToggleTop" type="button"><i class="fas fa-bars"></i></button>
							<form
								class="form-inline d-none d-sm-inline-block mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search">
								<div class="input-group">
									<div class="input-group-append"></div>
								</div>
							</form>
							<ul class="nav navbar-nav flex-nowrap ml-auto">
								<li class="nav-item dropdown d-sm-none no-arrow"><a class="dropdown-toggle nav-link"
										data-toggle="dropdown" aria-expanded="false" href="#"><i
											class="fas fa-search"></i></a>
									<div class="dropdown-menu dropdown-menu-right p-3 animated--grow-in" role="menu"
										aria-labelledby="searchDropdown">
										<form class="form-inline mr-auto navbar-search w-100">
											<div class="input-group"><input class="bg-light form-control border-0 small"
													type="text" placeholder="Search for ...">
												<div class="input-group-append"><button class="btn btn-primary py-0"
														type="button"><i class="fas fa-search"></i></button></div>
											</div>
										</form>
									</div>
								</li>
								<div class="d-none d-sm-block topbar-divider"></div>
								<li class="nav-item dropdown no-arrow" role="presentation">
									<div class="nav-item dropdown no-arrow"><a class="dropdown-toggle nav-link"
											data-toggle="dropdown" aria-expanded="false" href="#">
											<span class="d-none d-lg-inline mr-2 text-gray-600 small">管理员</span>
											<img class="border rounded-circle img-profile"
												src="assets/img/avatars/avatar1.jpeg"></a>
										<div class="dropdown-menu shadow dropdown-menu-right animated--grow-in"
											role="menu">
											<div class="dropdown-divider"></div>
											<a class="dropdown-item" role="presentation" href="hmslogin.html">

												<i
													class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>&nbsp;退出账户</a>

										</div>
									</div>
								</li>
							</ul>
						</div>
					</nav>

					<!-- 结束上边栏 开始处理下端表格部分 -->

					<div class="container-fluid">
						
						<div class="card shadow">
							<h3 style="color: #224abe;margin: auto;">&nbsp;&nbsp;房产信息管理</h3>
							<div class="row">
								<div class="col-md-1 text-nowrap"></div>
								<div class="col-md-2 text-nowrap">
								<div id="dataTable_length" class="dataTables_length" aria-controls="dataTable">
									<label>Show&nbsp;<select
											class="form-control form-control-sm custom-select custom-select-sm">
											<option value="10" selected="">10</option>
											<option value="25">25</option>
											<option value="50">50</option>
											<option value="100">100</option>
										</select>&nbsp;</label>
								</div> 
								</div>
								<div class="col-md-1 text-nowrap"></div>
								<div class="col-md-3 text-nowrap"></div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
								<div class="col-md-1 text-nowrap">
									<button class="btn btn-primary" type="button"
										style="color: #f9f9f9;background-color: #8b8b8b;"
										onClick="location.href='1-1.html'">房产信息</button>
										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

									<button class="btn btn-primary" type="button" style="color: white;"
										onClick="location.href='1-2.html'">楼宇管理</button>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;


									<button class="btn btn-primary" type="button" style="color: white;"
										onClick="location.href='1-3.html'">业务管理</button>
								</div>

							</div>

							<div class="card-body" id="app">
								<div class="row">
									
										
								</div>
									
									<!-- 每页显示数量部分 暂不实现-->
									<!-- <div class="col-md-6">
										<div class="text-md-right dataTables_filter" id="dataTable_filter"><label><input
													type="search" class="form-control form-control-sm"
													aria-controls="dataTable" placeholder="Search"></label></div> -->
									
									<div class="row">
									<!-- 简易搜索 暂不实现 -->
									<div class="col-md-3 text-nowrap">
										<div id="housingname" class="dataTables_length" aria-controls="dataTable">
											<label style="font-size: 15px;">小区：&nbsp;<select
													class="form-control form-control-sm custom-select custom-select-sm">
													<option value="mo" selected="">大连理工大学开发区校区</option>
													<option value="25">25</option>

												</select>&nbsp;</label>
										</div>
									</div>
									<div class="col-md-3 text-nowrap">
										
										<div id="housingname" class="dataTables_length" aria-controls="dataTable">

											<label style="font-size: 15px;">查询关键字：&nbsp;<select
													class="form-control form-control-sm custom-select custom-select-sm"
													v-model="searchtype">
													<option value="roomname" selected="">房间名</option>
													<option value="ownerid">产权人号</option>
													<option value="buildingid">楼宇号</option>
													<option value="tenement">住户</option>
													<option value="status">状态</option>
												</select>&nbsp;</label>

										</div>
									</div>



									<div class="col-md-2 text-nowrap">
										<div class="text-md-right dataTables_filter" id="dataTable_filter">
											<label>
												<input type="text" class="form-control form-control-sm"
													aria-controls="dataTable" placeholder="查询依据"
													v-model="searchcontent">
											</label>
										</div>
									</div>

									<div class="col-md-2 text-nowrap"></div>


									<div class="col-md-1 text-nowrap">
										<button class="btn btn-primary btn-block text-white btn-user" type="submit"
											@click="roomquery()">查询</button>

									</div>

									<div class="col-md-1 text-nowrap" style="align-items: center;">
										<button class="btn btn-primary btn-block text-white btn-user" type="submit"
											@click="isupdateshow =!isupdateshow">插入</button>

									</div>

								</div>
								<div class="table-responsive table mt-2" id="dataTable" role="grid"
									aria-describedby="dataTable_info">

									<table class="table my-0" id="dataTable">
										<thead>
											<tr>
												<th><strong>序号</strong></th>
												<th><strong>房间号</strong></th>
												<th><strong>房间名</strong></th>
												<th><strong>楼宇号</strong></th>
												<th><strong>产权人号</strong></th>
												<th><strong>面积</strong></th>
												<th><strong>住户</strong></th>
												<th><strong>状态</strong></th>
											</tr>
										</thead>
										<tbody>
											<tr></tr>

											<tr v-for="(item, index) in list">
												<td>{{index + 1 }}</td>
												<td>{{item.roomid}}</td>
												<td>{{item.roomname}}</td>
												<td>{{item.buildingid}}</td>
												<td>{{item.ownerid}}</td>
												<td>{{item.area}}</td>
												<td>{{item.tenement}}</td>
												<td>{{item.status}}</td>
												<td>
													<button class="btn btn-primary btn-block text-white btn-user"
														type="submit"
														@click="listshow = !listshow;updatejump(item.roomid);">更新</button>
												</td>
												<td>
													<button class="btn btn-primary btn-block text-white btn-user"
														type="submit" @click="roomdelete(item.roomid)"style="color: #f9f9f9;background-color: #aa1a1a;">删除</button>
												</td>

												<div class="dropdown" v-show="listshow">
													<hr>
													<div class="row">
														<div class="col-md-3 text-nowrap">
															<label style="font-size: 15px;">更改选项:&nbsp;&nbsp;<select
																	class="form-control form-control-sm custom-select custom-select-sm"
																	v-model="changetype">
																	<option value="roomname" selected="A">房间名</option>
																	<option value="buildingid">楼宇号</option>
																	<option value="ownerid">产权人号</option>
																	<option value="tenement">住户</option>
																	<option value="status">状态</option>
																	<option value="area">面积</option>
																</select>&nbsp;</label>
														</div>
														<div class="col-md-3 text-nowrap">
															<div class="dataTables_length" aria-controls="dataTable">
																<input type="text" class="form-control form-control-sm"
																	aria-controls="dataTable" placeholder="更改的数据"
																	v-model="changedata">&nbsp;&nbsp;
															</div>
														</div>
														
														<div class="col-md-3 text-nowrap"></div>
														
														<div class="col-md-2 text-nowrap">
															<div class="dataTables_length" aria-controls="dataTable">
																<button
																	class="btn btn-primary btn-block text-white btn-user"
																	type="submit"
																	@click="listshow = !listshow&roomupdate()">提交更新</button>

															</div>
														</div>

														<div class="col-md-1 text-nowrap" style="text-align: right;">
															<div class="dataTables_length" aria-controls="dataTable">
																<button
																	class="btn btn-primary btn-block text-white btn-user"
																	type="submit"
																	@click="listshow = !listshow"style="color: #f9f9f9;background-color: #aa1a1a;">取消</button>
															</div>

														</div>
													</div>
												</div>

												<div class="dropdown" v-show="isupdateshow">
													<hr>
													<div class="row">

														<div class="col-md-1 text-nowrap">
															<div class="dataTables_length" aria-controls="dataTable">
																<input type="text" class="form-control form-control-sm"
																	aria-controls="dataTable" placeholder="房间号"
																	v-model="insertroomnumber">&nbsp;&nbsp;
															</div>
														</div>

														<div class="col-md-1 text-nowrap">
															<div class="dataTables_length" aria-controls="dataTable">
																<input type="text" class="form-control form-control-sm"
																	aria-controls="dataTable" placeholder="房间名"
																	v-model="insertroomname">&nbsp;&nbsp;
															</div>
														</div>

														<div class="col-md-1 text-nowrap">
															<div class="dataTables_length" aria-controls="dataTable">
																<input type="text" class="form-control form-control-sm"
																	aria-controls="dataTable" placeholder="楼宇号"
																	v-model="insertbuildingid">&nbsp;&nbsp;
															</div>
														</div>

														<div class="col-md-1 text-nowrap">
															<div class="dataTables_length" aria-controls="dataTable">
																<input type="text" class="form-control form-control-sm"
																	aria-controls="dataTable" placeholder="产权人号"
																	v-model="insertownerid">&nbsp;&nbsp;
															</div>
														</div>

														<div class="col-md-1 text-nowrap">
															<div class="dataTables_length" aria-controls="dataTable">
																<input type="text" class="form-control form-control-sm"
																	aria-controls="dataTable" placeholder="面积"
																	v-model="insertarea">&nbsp;&nbsp;
															</div>
														</div>

														<div class="col-md-1 text-nowrap">
															<div class="dataTables_length" aria-controls="dataTable">
																<input type="text" class="form-control form-control-sm"
																	aria-controls="dataTable" placeholder="住户"
																	v-model="inserttenement">&nbsp;&nbsp;
															</div>
														</div>

														<div class="col-md-1 text-nowrap">
															<div class="dataTables_length" aria-controls="dataTable">
																<input type="text" class="form-control form-control-sm"
																	aria-controls="dataTable" placeholder="状态"
																	v-model="insertstatus">&nbsp;&nbsp;
															</div>
														</div>
														
														<div class="col-md-2 text-nowrap">
															<div class="dataTables_length" aria-controls="dataTable">
																<button
																	class="btn btn-primary btn-block text-white btn-user"
																	type="submit"
																	@click="isupdateshow = !isupdateshow&roominsert()">提交插入</button>

															</div>
														</div>

														<div class="col-md-1 text-nowrap">
															<div class="dataTables_length" aria-controls="dataTable">
																<button
																	class="btn btn-primary btn-block text-white btn-user"
																	type="submit"
																	@click="isupdateshow = !isupdateshow"style="color: #f9f9f9;background-color: #aa1a1a;">取消</button>
															</div>
														</div>

													</div>
												</div>
											</tr>
								</div>
							</div>

							<tr></tr>
							</tbody>
							<tfoot>
								<tr>
									<th><strong>序号</strong></th>
									<th><strong>房间号</strong></th>
									<th><strong>房间名</strong></th>
									<th><strong>楼宇号</strong></th>
									<th><strong>产权人号</strong></th>
									<th><strong>面积</strong></th>
									<th><strong>住户</strong></th>
									<th><strong>状态</strong></th>
								</tr>
							</tfoot>
							</table>
						</div>

						<div class="row">
							<div class="col-md-6 align-self-center">
								<p id="dataTable_info" class="dataTables_info" role="status" aria-live="polite">
								</p>
							</div>
							
							<div class="col-md-6">
								<nav class="d-lg-flex justify-content-lg-end dataTables_paginate paging_simple_numbers">
									<ul class="pagination">
												<li class="page-item disabled"><a class="page-link" href="#"
														aria-label="Previous"><span aria-hidden="true">«</span></a></li>
												<li class="page-item active"><a class="page-link" href="#">1</a></li>
												<li class="page-item"><a class="page-link" href="#">2</a></li>
												<li class="page-item"><a class="page-link" href="#">3</a></li>
												<li class="page-item"><a class="page-link" href="#"
														aria-label="Next"><span aria-hidden="true">»</span></a></li>
									</ul>
								</nav>
							</div>
							
						</div>
					</div>
				</div>
			</div>
		</div>
		<footer class="bg-white sticky-footer">
			<div class="container my-auto">
				<div class="text-center my-auto copyright"><span>Copyright © Baix3XiaoRuo 赵灏 张忆馨 杨斯涵</span>
				</div>
			</div>
		</footer>
		</div><a class="border rounded d-inline scroll-to-top" href="#page-top"><i class="fas fa-angle-up"></i></a>
		</div>
		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/bootstrap/js/bootstrap.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.js"></script>
		<script src="assets/js/theme.js"></script>
		<script src="js/vue.js"></script>
		<script src="js/axios.js"></script>
		<script>
			var vue = new Vue({
				el: "#app",
				data: {
					iscorrect: false,
					listshow: false,
					buildingid: "",
					searchtype: "",
					searchcontent: "",
					list: [],
					tmptext: "",
					changetype: "",
					changedata: "",
					isupdateshow: false,
					insertroomnumber: "",
					insertarea: "",
					insertbuildingid: "",
					insertownerid: "",
					insertroomname: "",
					insertstatus: "",
					inserttenement: "",
					deleteid: ""
				},
				methods: {
					testlog: function() {
						console.log(this.buildingid);
					},
					roominsert: function() {
						console.log(this.insertroomid);
						console.log(this.insertroomname);
						console.log(this.insertbuildingid);
						console.log(this.insertownerid);
						console.log(this.insertarea);
						console.log(this.inserttenement);
						console.log(this.insertstatus);

						/* let param = new URLSearchParams();
						param.append('pointer', this.tmptext);
						param.append('tabletype', "room");
						param.append('updatetype', this.changetype);
						param.append('updatecontent', this.changedata);
						
						axios({
							headers: {
								'content-type': 'application/x-www-form-urlencoded'
							},
							method: "post",
							url: "http://localhost:8888/simpleweb/Fullupdateapi",
							data: param
						}).then((res) => {
							console.log(res);
							alert("插入成功");
							location.reload();
						}).catch((error) => {
							console.log(error);
						}); */

					},
					roomupdate: function() {
						console.log(this.changetype);
						console.log(this.changedata);
						let param = new URLSearchParams();
						param.append('pointer', this.tmptext);
						param.append('tabletype', "room");
						param.append('updatetype', this.changetype);
						param.append('updatecontent', this.changedata);
						axios({
							headers: {
								'content-type': 'application/x-www-form-urlencoded'
							},
							method: "post",
							url: "http://localhost:8888/simpleweb/Fullupdateapi",
							data: param
						}).then((res) => {
							console.log(res);
							alert("选中的值已经更改为" + this.changedata);
							location.reload();
						}).catch((error) => {
							console.log(error);
						});


					},
					roomdelete: function(roomid) {
						console.log(roomid);
						this.deleteid = roomid;
						let param = new URLSearchParams();
						param.append('tabletype', "room");
						param.append('identifier', this.deleteid);
						axios({
							headers: {
								'content-type': 'application/x-www-form-urlencoded'
							},
							method: "post",
							url: "http://localhost:8888/simpleweb/Fulldeleteapi",
							data: param
						}).then((res) => {
							console.log(res.data);
							if (res.data.Res = true) {
								alert("删除成功！");
								location.reload();
							} else {

							}

						}).catch((error) => {
							console.log(error);
						});
					},
					updatejump: function(roomid) {
						this.tmptext = roomid;
						console.log(this.tmptext);
					},
					roomquery: function() {
						console.log(this.searchtype);
						console.log(this.searchcontent);
						let param = new URLSearchParams();
						param.append('tabletype', "room");
						param.append('querytype', this.searchtype);
						param.append('querycontent', this.searchcontent);
						axios({
							headers: {
								'content-type': 'application/x-www-form-urlencoded'
							},
							method: "post",
							url: "http://localhost:8888/simpleweb/Fullquerynewapi",
							data: param
						}).then((res) => {
							console.log(res.data);
							if (res.data.length > 0) {
								this.list = res.data;
								this.isshow = false;
							} else {
								this.list = [];
								this.isshow = true;
							}

						}).catch((error) => {
							console.log(error);
						});
					},
				}
			});
		</script>
	</body>

</html>
